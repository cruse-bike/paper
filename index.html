<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="keywords" content="Cycling, Open-source, Road Safety, Active Travel">

<title>CRUSE</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="site_libs/quarto-diagram/mermaid.min.js"></script>
<script src="site_libs/quarto-diagram/mermaid-init.js"></script>
<link href="site_libs/quarto-diagram/mermaid.css" rel="stylesheet">


</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">CRUSE</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./paper.html" rel="" target="">
 <span class="menu-text">Cruse to safe cycling in Ireland: full paper</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://cruse.bike" rel="" target="">
 <span class="menu-text">CRUSE web application</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools ms-auto">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction"><span class="header-section-number">1</span> Introduction</a></li>
  <li><a href="#sec-methods" id="toc-sec-methods" class="nav-link" data-scroll-target="#sec-methods"><span class="header-section-number">2</span> Methods and data</a>
  <ul class="collapse">
  <li><a href="#sec-disaggregation" id="toc-sec-disaggregation" class="nav-link" data-scroll-target="#sec-disaggregation"><span class="header-section-number">2.1</span> Disaggregation of origin-destination data</a></li>
  <li><a href="#sec-trip-purposes" id="toc-sec-trip-purposes" class="nav-link" data-scroll-target="#sec-trip-purposes"><span class="header-section-number">2.2</span> Additional trip purposes</a></li>
  <li><a href="#routing" id="toc-routing" class="nav-link" data-scroll-target="#routing"><span class="header-section-number">2.3</span> Routing</a></li>
  <li><a href="#sec-scenarios" id="toc-sec-scenarios" class="nav-link" data-scroll-target="#sec-scenarios"><span class="header-section-number">2.4</span> Scenarios of cycling potential</a>
  <ul class="collapse">
  <li><a href="#baseline" id="toc-baseline" class="nav-link" data-scroll-target="#baseline"><span class="header-section-number">2.4.1</span> Baseline</a></li>
  <li><a href="#near-market" id="toc-near-market" class="nav-link" data-scroll-target="#near-market"><span class="header-section-number">2.4.2</span> Near Market</a></li>
  <li><a href="#climate-action-plan" id="toc-climate-action-plan" class="nav-link" data-scroll-target="#climate-action-plan"><span class="header-section-number">2.4.3</span> Climate Action Plan</a></li>
  <li><a href="#go-dutch" id="toc-go-dutch" class="nav-link" data-scroll-target="#go-dutch"><span class="header-section-number">2.4.4</span> Go Dutch</a></li>
  <li><a href="#ebike" id="toc-ebike" class="nav-link" data-scroll-target="#ebike"><span class="header-section-number">2.4.5</span> Ebike</a></li>
  </ul></li>
  <li><a href="#sec-ui" id="toc-sec-ui" class="nav-link" data-scroll-target="#sec-ui"><span class="header-section-number">2.5</span> User interface</a></li>
  </ul></li>
  <li><a href="#sec-results" id="toc-sec-results" class="nav-link" data-scroll-target="#sec-results"><span class="header-section-number">3</span> Results</a></li>
  <li><a href="#sec-discussion" id="toc-sec-discussion" class="nav-link" data-scroll-target="#sec-discussion"><span class="header-section-number">4</span> Discussion</a></li>
  <li><a href="#sec-conclusions" id="toc-sec-conclusions" class="nav-link" data-scroll-target="#sec-conclusions"><span class="header-section-number">5</span> Conclusions</a></li>
  <li><a href="#list-of-abbreviations" id="toc-list-of-abbreviations" class="nav-link" data-scroll-target="#list-of-abbreviations"><span class="header-section-number">6</span> List of abbreviations</a></li>
  <li><a href="#declarations" id="toc-declarations" class="nav-link" data-scroll-target="#declarations"><span class="header-section-number">7</span> Declarations</a>
  <ul class="collapse">
  <li><a href="#availability-of-data-and-material" id="toc-availability-of-data-and-material" class="nav-link" data-scroll-target="#availability-of-data-and-material">Availability of data and material</a></li>
  <li><a href="#funding" id="toc-funding" class="nav-link" data-scroll-target="#funding">Funding</a></li>
  <li><a href="#acknowledgements" id="toc-acknowledgements" class="nav-link" data-scroll-target="#acknowledgements">Acknowledgements</a></li>
  <li><a href="#competing-interests" id="toc-competing-interests" class="nav-link" data-scroll-target="#competing-interests">Competing interests</a></li>
  <li><a href="#authors-contributions" id="toc-authors-contributions" class="nav-link" data-scroll-target="#authors-contributions">Authors’ contributions</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">CRUSE to Safe Cycling in Ireland</h1>
<p class="subtitle lead">An Open Source Tool to Support Active Travel</p>
</div>



<div class="quarto-title-meta">

    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">last-modified</p>
    </div>
  </div>
  
    
  </div>
  
<div>
  <div class="abstract">
    <div class="abstract-title">Abstract</div>
    <p>Under the EU Road infrastructure safety management (RISM) directive, the National Road Safety Strategy (RSS), and the Climate Action Plan Transport Infrastructure Ireland (TII) has a remit for road safety and decarbonizing a predominantly road-based network in Ireland.</p>
    <p>The Cycle Route Uptake and Scenario Estimation (CRUSE) Tool was commissioned by TII and developed by the Leeds Institute for Transport Studies (ITS) and AECOM To address data needs for safety, business case development and project evaluation on the National Road Network (NRN). Cycling in Ireland represents only 3% of total modal share as of the latest Census (2016), but accounts for 20% of serious injuries and 7% of all fatalities. High resolution datasets on baseline and potential cycling levels are needed to meet Ireland’s climate and safety targets.</p>
    <p>The CRUSE project builds on the methods underlying the Propensity to Cycle Tool for England and Wales (PCT), which had a major impact on strategic cycle network planning in the UK. Like the PCT, CRUSE is based on open source software and reproducible data science. The resulting web application is available at <a href="https://cruse.bike/" class="uri">https://cruse.bike/</a>, enabling planners, engineers, and other stakeholders to make more evidence-based decisions for the NRN. CRUSE goes beyond the PCT in several important ways, modeling denser networks at higher levels of geographic resolution and additional purposes, including simulated recreational, social, shopping and personal trips, in addition to trips to work and primary, secondary and tertiary education locations. The tool provides key ‘denominator’ information to enable reporting of collision rates per billion km cycled.</p>
    <p>Another key feature of CRUSE is its use of Open Street Map (OSM) data, which is continuously updated, and used by <a href="https://www.cyclestreets.net/">Cyclestreets.net</a> for route calculation and “cycle friendliness” estimates of all links on the network. CRUSE provides three network types: the ‘Fastest’ network highlights routes for directness; ‘Quietest’ prioritises cycle friendliness, and ‘Balanced’ represents a balance between speed and comfort. Trips are generated based on origin and destination data from the 2016 Census in combination with modeled demand data to estimate current and potential future cycling levels at area, route, and network levels for each county in Ireland.</p>
    <p>For investment in cycling to deliver on the huge potential benefits, cycling must become safer. With growth in the E-bike market, CRUSE will help inform inter-urban and rural networks to support the transfer of trips to sustainable modes for longer journeys. Provision of open access data in a publicly available web tool will address the challenges faced by National Road Authorities (NRAs) across Ireland in meeting their sustainability commitments. The experience of developing a deploying CRUSE are relevant to countries with sustainable transport policies worldwide.</p>
  </div>
</div>

</header>

<p>This website provides long form documentation on the CRUSE web tool for Ireland, publicly available at <a href="https://cruse.bike" class="uri">https://cruse.bike</a>. It was produced with Quarto, which was also used to support the academic paper shown below. See <a href="https://quarto.org/docs/websites" class="uri">https://quarto.org/docs/websites</a> for further information.</p>
<p>See <a href="https://github.com/cruse-bike/paper">github.com/cruse-bike/paper</a> for the source code of this website.</p>
<div style="page-break-after: always;"></div>
<section id="introduction" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Introduction</h1>
<!-- Mobility kills. -->
<p>High energy transport systems are a major contributor to climate change, a leading cause of premature death and injury due to road traffic collisions, and a cause of disease due to airborne and noise pollutants. Conversely, evidence-based and effective transport <em>policies</em> have great potential to decarbonize economies, improve public health, and save lives.</p>
<p>Transport is responsible for 23% of global greenhouse gas emissions, 70% of which are from road transport. Nearly nearly half of these emissions (around 10% of global emissions) are from passenger cars <span class="citation" data-cites="jaramillo2022">(<a href="#ref-jaramillo2022" role="doc-biblioref">Jaramillo et al., 2022</a>)</span>. The transport system encourages, enables and in some cases enforces unsustainable lifestyles. Services that are only accessible by car lock-in car dependency <span class="citation" data-cites="gray2001 shergold2012 motte-baumvol2010">(<a href="#ref-gray2001" role="doc-biblioref">Gray et al., 2001</a>; <a href="#ref-motte-baumvol2010" role="doc-biblioref">Motte-baumvol et al., 2010</a>; <a href="#ref-shergold2012" role="doc-biblioref">Shergold et al., 2012</a>)</span>.</p>
<p>Recognizing the growing evidence of such impacts of poorly designed and performing transport systems, governments in many countries have set targets and taken actions. In the context of climate, road safety and physicial inactivity crises, policies to improve transport systems can be classified according to the ‘Avoid-Shift-Improve’ (ASI) framework <span class="citation" data-cites="jaramillo2022">(<a href="#ref-jaramillo2022" role="doc-biblioref">Jaramillo et al., 2022</a>)</span>. The ASI framework highlights the importance of demand reduction (<em>avoid</em>ing unnecessary trips), in addition to mode <em>shift</em> to sustainable modes and <em>improvement</em> of existing energy converters, in that order.</p>
<p>Uptake of cycling, the main topic of this paper, should be seen in this broader context of transport decarbonisation <span class="citation" data-cites="brand2020">(<a href="#ref-brand2020" role="doc-biblioref">Brand et al., 2020</a>)</span> and sustainable mobility <span class="citation" data-cites="burns2013">(<a href="#ref-burns2013" role="doc-biblioref">Burns, 2013</a>)</span>. Although cycling uptake appears on the surface to only relate to the ‘shift’ part of the ASI framework, closer consideration of the knock-on impacts of cycling uptake shows that it can also help avoid unnecessary trips <span class="citation" data-cites="nello-deakin2020">(<a href="#ref-nello-deakin2020" role="doc-biblioref">Nello-Deakin, 2020</a>)</span>. Furthermore, highly efficient e-bikes — which are seeing rapid uptake in Ireland and other countries — outperform electric cars, which are too heavy and expensive. Over-reliance on electric cars could slow the transition away from car dependency and inadvertently enable “high travel lock-in” <span class="citation" data-cites="anable2019">(<a href="#ref-anable2019" role="doc-biblioref">Anable &amp; Goodwin, 2019</a>)</span>. At the European level, the European Union has a target of reducing greenhouse gas emissions by 55% by 2030, compared to 1990 levels, and to achieve ‘net-zero’ by 2050.<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a></p>
<p>Regarding road traffic casualties, another deadly consequence of inefficient transport systems, the Road Infrastructure Safety Management (RISM) directive (2008/96/EC) requires member states to implement a road safety management system (RSMS) for all public roads. Specifically, “Member States shall ensure that the ranking of high accident concentration sections and the network safety ranking are carried out”.<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a> Given that ‘safety’ in this context is usefully quantified as the number of people killed and seriously injured (KSI) per distance travelled, the directive requires estimation of distance travelled by mode, down to the road link level. For active modes, about which there is a paucity of data compared with motorized modes, this is a major challenge. Better data to inform road safety policies and interventions is a motivation for the CRUSE Tool outlined in this paper, and modeling active travel more broadly.</p>
<p>In Ireland, the Road Safety Authority (RSA) has set the target of halving the number of road traffic deaths and serious injuries by 2030.<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a> Doing so while simultaneously enabling rapid uptake of active modes will require key active travel routes to be identified and improved.</p>
<p>A proactive approach to the development of cycling policy and infrastructure is taking place in Ireland. The main frameworks underpinning these efforts are the Climate Action Plan<a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a>, the National Development Plan<a href="#fn5" class="footnote-ref" id="fnref5" role="doc-noteref"><sup>5</sup></a>, and the National Roads 2040 strategy <a href="#fn6" class="footnote-ref" id="fnref6" role="doc-noteref"><sup>6</sup></a>. <!-- Strategic alignment is also outlined by the Phoenix Park Transport and Mobility Options Study, which highlights public support for active travel interventions: while only 3% of trips in Ireland are made by cycling according to the latest Census data from 2016,^[ --> These policy frameworks are backed-up by public support for active travel interventions: while only 3% of trips in Ireland are made by cycling according to the latest Census data from 2016,<a href="#fn7" class="footnote-ref" id="fnref7" role="doc-noteref"><sup>7</sup></a> “83% of respondents supported enhanced walking and cycling facilitie s”.</p>
<p>At the regional level, the recently published Greater Dublin Area Transport Strategy<a href="#fn8" class="footnote-ref" id="fnref8" role="doc-noteref"><sup>8</sup></a> reinforces these findings: “nearly a quarter of adults cycle at least once a week in the Dublin Metropolitan Area” with cycling in the Dublin area taking up to 60,000 cars off the road today. Extrapolating this on a per population basis across Ireland, with around 40% of the population living in Dublin, this suggests that around 150,000 cars could be removed nationwide just by achieving Dublin levels of cycling in all counties (notwithstanding existing cycling trips and differences in trip distances). 7 in 10 trips in Ireland are by car<a href="#fn9" class="footnote-ref" id="fnref9" role="doc-noteref"><sup>9</sup></a> . Cycling has the potential to replace a large proportion of these trips: “A high priority must also be given to cyclists, because trips by this mode have the potential to replace trips by private car, most specifically for short to medium distance trips, but increasingly for longer trips as e-bikes extend the range of this mode” <a href="#fn10" class="footnote-ref" id="fnref10" role="doc-noteref"><sup>10</sup></a>.</p>
<p>Further evidence of the importance of cycling in Ireland <em>already</em> is provided by the National Strategic Objective (NSO) from the National Development Plan, with €8.6 billion allocated to sustainable transport infrastructure including public transport and active travel interventions. Cycle infrastructure will be developed in synchrony with the BusConnects project, an entire redesign of the bus network in Dublin and Cork.</p>
<p>It was in this context that Transport Infrastructure Ireland (TII) commissioned the Cycle Route Uptake and Scenario Estimation (CRUSE) project. Based on the Propensity to Cycle Tool (PCT) for England and Wales, the CRUSE Tool was developed to provide evidence on current cycling levels and future cycling potential nationwide across Ireland.</p>
<p>A key consideration for TII is to ensure both urban and rural Ireland were targeted for cycling infrastructure, as shown in <a href="#fig-dublin">Figure&nbsp;1</a>. To this end, TII extensively reviewed activity on Irish Roads and how the road network was being used by commuters, cyclists, heavy goods vehicles and other road users across the Irish transport network. The aim was for the tool to provide strong, national, systematic but locally-specific evidence to monitor cycling friendliness and safety in Ireland, to ensure strategic alignment with national, regional and local policies. The open source and publicly available nature of the tool ensures more inclusive and evidence-based conversations around cycle network planning between all stakeholders in the transport planning process.</p>
<p>TII also requires evidence to support monitoring of growth in cycling, upgrades of existing cycling infrastructure, business case development and appraisal, and exposure information to estimate crash rates. Exposure information is a key part of the the European RISM Directive, for reporting collision rates of vulnerable road users by 2024. These factors mean that the tool can be seen as an open access ‘leverage point’, providing key information for and supporting ambitious plans in many aspects the planning system, from network design to post-build monitoring <span class="citation" data-cites="lovelace2020">(<a href="#ref-lovelace2020" role="doc-biblioref">Lovelace et al., 2020</a>)</span>.</p>
<div id="fig-dublin" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="images/paste-1.png" class="img-fluid figure-img"></p>
<p><img src="images/paste-3.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Figure&nbsp;1: Illustration of the density of route networks generated by the CRUSE Tool for Dublin City and surroundings (top) and rural County Mayo on the West coast of Ireland. Source: CRUSE Tool, available at <a href="https://cruse.bike/" class="uri">https://cruse.bike/</a>.</figcaption>
</figure>
</div>
<p>The main aim of the paper is to present the CRUSE Tool and describe the methods and datasets on which the estimates of current and future potential cycling levels are based. We will also highlight key results, discuss the implications for policy and practice, and outline how similar tools could be developed in other countries. It is structured as follows. In <a href="#sec-methods">Section&nbsp;2</a>, we outline the methods used to generate the evidence presented in the CRUSE Tool for Ireland. In <a href="#sec-results">Section&nbsp;3</a>, we present the results of the CRUSE Tool, including estimates of current cycling levels and future cycling potential at the national, regional and local levels. In <a href="#sec-discussion">Section&nbsp;4</a>, we discuss the implications of the results for policy and practice. In <a href="#sec-conclusions">Section&nbsp;5</a>, we conclude the paper.</p>
</section>
<section id="sec-methods" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Methods and data</h1>
<p>The methods used to generate the evidence presented in the CRUSE Tool for Ireland build on the Propensity to Cycle Tool (PCT), which was originally funded by the UK’s Department for Transport and developed by a multi-university team. An important feature of the PCT is that it is open source and publicly available (at <a href="https://www.pct.bike/">www.pct.bike</a>), allowing its use by all stakeholders in the transport planning process <span class="citation" data-cites="lovelace2017">(<a href="#ref-lovelace2017" role="doc-biblioref">Lovelace et al., 2017</a>)</span>. The PCT approach has had major policy impacts, as outlined in Research Excellence Framework (REF) impact case studies, which demonstrate that the tool “revolutionised strategic cycle planning in England and Wales”<a href="#fn11" class="footnote-ref" id="fnref11" role="doc-noteref"><sup>11</sup></a> by overcoming the barriers to cycling investment imposed by lack of evidence on cycling potential<a href="#fn12" class="footnote-ref" id="fnref12" role="doc-noteref"><sup>12</sup></a> .</p>
<p>The first version of the PCT was based on current and future potential uptake of cycling for single stage <em>travel to work</em> at desire line, zone, route, and route network levels <span class="citation" data-cites="lovelace2016">(<a href="#ref-lovelace2016" role="doc-biblioref">Lovelace, 2016</a>)</span>. It was launched in April 2017 as the government-endorsed tool for strategic cycle network planning and part of the Cycling and Walking Investment Strategy <span class="citation" data-cites="cycling2017">(<a href="#ref-cycling2017" role="doc-biblioref"><em>Cycling and Walking Investment Strategy</em>, 2017</a>)</span>. Extensions of the PCT approach have included estimation of benefits at the individual level <span class="citation" data-cites="woodcock2018">(<a href="#ref-woodcock2018" role="doc-biblioref">Woodcock et al., 2018</a>)</span>, addition of travel to school network <span class="citation" data-cites="goodman2019">(<a href="#ref-goodman2019" role="doc-biblioref">Goodman et al., 2019</a>)</span>, and improved modelling of impacts on health, environmental and distributional outcomes <span class="citation" data-cites="woodcock2021">(<a href="#ref-woodcock2021" role="doc-biblioref">Woodcock et al., 2021</a>)</span>. Initially developed just for England, the PCT was extended to cover all of Wales (for commuter data only) in 2018.</p>
<p>The PCT approach has been applied in other countries, including Ireland (the topic of this paper), Scotland, and Portugal. In Portugal the ‘biclaR’ project, based on methods underlying the PCT, has been developed and deployed for the Lisbon metro region. The resulting evidence is available in an interactive web application hosted at <a href="https://biclar.tmlmobilidade.pt">biclar.tmlmobilidade.pt</a> <span class="citation" data-cites="felix2023">(<a href="#ref-felix2023" role="doc-biblioref">Félix et al., 2022</a>)</span>. biclaR includes estimates of impacts, using the World Health Organisation (WHO) ‘HEAT for Cycling’ tool<a href="#fn13" class="footnote-ref" id="fnref13" role="doc-noteref"><sup>13</sup></a> and an ‘intermodality’ scenario that combines cycling with currently available public transit options based on General Transit Feed Specification (GTFS) data.</p>
<p>The CRUSE Tool seeks to overcome the following methodological limitations of the original PCT:</p>
<ul>
<li>Low resolution of data, with routes starting and ending in administrative zone centroids</li>
<li>Limited coverage of trip purposes beyond travel to work and school</li>
<li>A web interface that was not user-friendly or intuitive</li>
</ul>
<p>Methods were developed to overcome each of these, as outlined in <a href="#sec-trip-purposes">Section&nbsp;2.2</a> to <a href="#sec-ui">Section&nbsp;2.5</a>.</p>
<!-- Todo: add section on input datasets -->
<section id="sec-disaggregation" class="level2" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="sec-disaggregation"><span class="header-section-number">2.1</span> Disaggregation of origin-destination data</h2>
<p>A feature of active travel interventions is that they require dense networks of routes to be effective <span class="citation" data-cites="parkin2018">(<a href="#ref-parkin2018" role="doc-biblioref">Parkin, 2018</a>)</span>. This means that high levels of geographic resolution are needed in the data used to estimate cycling potential. However, datasets on travel patterns are often only available at the level of administrative zones. The Central Statistics Office (CSO) in Ireland provides Place of Work, School or College Census of Anonymised Records (<a href="https://www.cso.ie/en/census/census2016reports/powscar/">POWSCAR</a>) data on the number of people travelling to work and school at the Electoral Division (ED) level, for example.</p>
<p>The method used to convert OD data to route networks used in the PCT was to calculate a single route between the population weighted centroids associated with each OD pair. This method works fine when the OD data represents movement between small areas, but was not appropriate for generating route networks from the POWSCAR data because zone centroids are so far apart that the resulting route networks would be sparse and unrealistic. To tackle this issue we developed a new method for OD data disaggregation called ‘jittering’ <span class="citation" data-cites="lovelace2022">(<a href="#ref-lovelace2022" role="doc-biblioref">Lovelace et al., 2022</a>)</span>. The method works by first disaggregating the OD data based on a ‘disaggregation threshold’ and then assigning each disaggregated ‘sub-OD’ pair to ‘subpoints’ within each zone. As shown in <a href="#fig-dublin">Figure&nbsp;1</a>, the resulting route networks are dense, even in rural areas.</p>
</section>
<section id="sec-trip-purposes" class="level2" data-number="2.2">
<h2 data-number="2.2" class="anchored" data-anchor-id="sec-trip-purposes"><span class="header-section-number">2.2</span> Additional trip purposes</h2>
<p>A limitation of the original PCT was that it only included travel to work data. This was partially addressed by the inclusion of travel to school based on data from the Department for Education in England <span class="citation" data-cites="goodman2019">(<a href="#ref-goodman2019" role="doc-biblioref">Goodman et al., 2019</a>)</span>. An advantage of the POWSCAR OD data over OD datasets derived from census surveys in many countries is that it includes travel to school data. We commissioned a version of POWSCAR that included a breakdown of the total flows between OD pairs by purpose and mode, enabling a more realistic estimation of the ‘Baseline’ cycling network.</p>
<p>However, travel to school and work only constitute around only 30% of all trips in Ireland. To overcome this issue, we developed a spatial interaction modelling methodology to estimate the number of trips between each OD pair for additional trip purposes. The classification of trip purposes used in the CRUSE Tool was guided mainly by the trip purpose classification found within the National Household Travel Survey (NHTS), but with the addition of categories based on the comprehensive POWSCAR data, and the need to include recreational trips and multi-stage trips (not yet implemented). An overview of the trip purposes used in CRUSE is presented in <a href="#fig-trip-purposes">Figure&nbsp;2</a>.</p>
<div id="fig-trip-purposes" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="images/paste-4.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Figure&nbsp;2: Trip purposes used in the CRUSE Tool.</figcaption>
</figure>
</div>
<!-- 
The POWSCAR-based categories are:

- work (commute)
- primary education
- secondary education
- tertiary education

The NHTS-based categories are:

- social
- shopping
- personal/other

And the recreational trips were classified as follows:

- Domestic with cycle trips starting at home
- Domestic trips involving travel by other mode to the start of the cycle trip
- Cycle tourism, where start and end trips are different
- Sport cycling 
-->
</section>
<section id="routing" class="level2" data-number="2.3">
<h2 data-number="2.3" class="anchored" data-anchor-id="routing"><span class="header-section-number">2.3</span> Routing</h2>
<p>Routes in CRUSE are generated by CycleStreets, a not-for profit transport consultancy and web development company who provide application programming interfaces (APIs) supplying a range of datasets for cycle planning and advocacy. Although based in Cambridge, UK, CycleStreets provide routing services ‘by cyclists, for cyclists’ internationally, including in Ireland. The CycleStreets routing engine is based on OpenStreetMap (OSM) data, which is continuously updated by a global community of volunteers.</p>
<p>CycleStreets’ services can be used by anyone for free, but we commissioned a bespoke routing service for CRUSE for the following reasons, to enable:</p>
<ul>
<li>Calculation of hundreds-of-thousands of routes, which is beyond the terms of service of the free API.</li>
<li>Making changes to the routing profiles, including allowing routing on trunk roads, which are sometimes avoided in the default routing profiles.</li>
<li>Control over the version of OSM data being used for the routing, allowing regular updates to the route networks as OSM data is updated.</li>
</ul>
<p>We calculated three network types for each disaggregated (‘jittered’) OD pair: ‘Fastest’, ‘Balanced’ and ‘Quietest’. As outlined on the CycleStreets’ <a href="https://www.cyclestreets.net/help/journey/howitworks/">website</a>, the ‘Fastest’ routes minimise journey time, accounting for traffic lights and surface type. The ‘Quietest’ route type minimises busy sections of road, allowing high ‘diversion factors’ from the fastest route on quieter but less direct ways (often avoiding roads and interactions with motor vehicles altogether where possible). The ‘Balanced’ route type is a compromise between the two, minimising journey time while avoiding the busiest roads. Allowing users to switch between these three route types enables them to consider the trade-offs between directness and ‘cycle friendliness’ when planning new infrastructure, as shown in <a href="#fig-route-types">Figure&nbsp;3</a>.</p>
<p>These map are available on the ‘Route types’ page for each county (see <a href="https://cruse.bike/limerick/route-types">cruse.bike/limerick/route-types</a>). In addition to showing the estimated routes under each scenario, the page also presents summary statistics on the network:</p>
<ul>
<li><p>On the fastest network, 25% of the distance cycled occurs in non-hostile segments and 6% in cycle-friendly segments.</p></li>
<li><p>Under the baseline scenario, 55% of the distance cycled on the quietest network occurs in non-hostile segments and 13% in cycle-friendly segments.</p></li>
</ul>
<p>These statistics can be revealing: in Limerick it suggests that around half of all cycling activity occurs on network segments that are hostile (with a high inferred level of traffic stress), even when efforts are taken to avoid busy segments. For the Fastest network, which may be more realistic for utility cycling, the proportion of cycling on hostile segments is even higher at 75%.</p>
<p>TODO: Add description of route types in Limerick based on local knowledge and <a href="#fig-route-types">Figure&nbsp;3</a>.</p>
<!-- Add figure with a single row and subcaptions for Fastest and Quietest route types: -->
<div id="fig-route-types" class="quarto-layout-panel">
<figure class="figure">
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="quarto-layout-cell" style="flex-basis: 100.0%;justify-content: center;">
<p><img src="images/paste-5.png" class="img-fluid figure-img"></p>
</div>
</div>
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="quarto-layout-cell" style="flex-basis: 100.0%;justify-content: center;">
<p><img src="images/paste-6.png" class="img-fluid figure-img"></p>
</div>
</div>
<p></p><figcaption class="figure-caption">Figure&nbsp;3: Illustration of the Fastest and Quietest route networks for central and East Limmerick.</figcaption><p></p>
</figure>
</div>
</section>
<section id="sec-scenarios" class="level2" data-number="2.4">
<h2 data-number="2.4" class="anchored" data-anchor-id="sec-scenarios"><span class="header-section-number">2.4</span> Scenarios of cycling potential</h2>
<p>The datasets outlined above were used to generate estimates of cycling currently (the ‘Baseline’ scenario) and under four scenarios of cycling potential: Near Market, Climate Action Plan, Go Dutch, and Ebike. Each of these scenarios is described below, as illustrated in Figure <a href="#fig-scenarios">Figure&nbsp;4</a>. <!-- TODO: add table. --></p>
<div id="fig-scenarios" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="images/paste-7.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Figure&nbsp;4: Distance-mode share graph for Limerick used to communicate the different scenarios. Source: county level view for Limerick in the open access CRUSE Tool at <a href="https://cruse.bike/limerick" class="uri">https://cruse.bike/limerick</a>.</figcaption>
</figure>
</div>
<section id="baseline" class="level3" data-number="2.4.1">
<h3 data-number="2.4.1" class="anchored" data-anchor-id="baseline"><span class="header-section-number">2.4.1</span> Baseline</h3>
<p>The Baseline scenario approximates current cycling levels. As outlined in <a href="#sec-trip-purposes">Section&nbsp;2.2</a>, the Baseline scenario includes travel to work and school, and additional trip purposes. Cycling levels were taken from the POWSCAR data, which includes the number of people travelling by each mode between each OD pair.</p>
</section>
<section id="near-market" class="level3" data-number="2.4.2">
<h3 data-number="2.4.2" class="anchored" data-anchor-id="near-market"><span class="header-section-number">2.4.2</span> Near Market</h3>
<p>The Near Market scenario approximates the level of cycling that would be achieved if levels of cycling uptake observed in areas of Ireland with high levels of cycling according to the 2016 Census were achieved everywhere, accounting for differences in trip distances and hilliness levels. The scenario is implemented as follows:</p>
<ul>
<li>Calculate distance decay curves for Dublin for the base year (2016, using POWSCAR data) by fitting a model to the relevant OD data after it has been converted to a route network datasest</li>
<li>Apply the Near Market model to the hilliness and distance values for each county during the build process</li>
<li>Add the current level of cycling to the Near Market model</li>
</ul>
</section>
<section id="climate-action-plan" class="level3" data-number="2.4.3">
<h3 data-number="2.4.3" class="anchored" data-anchor-id="climate-action-plan"><span class="header-section-number">2.4.3</span> Climate Action Plan</h3>
<p>The Climate Action Plan scenario is loosely based on the Irish Government’s <a href="https://www.gov.ie/en/publication/6223e-climate-action-plan-2021/">Climate Action Plan 2021</a>, which contains policies for action to achieve a 51% reduction in overall greenhouse gas emissions by 2030, on a path towards net-zero by 2050. For transport, this includes 500,000 extra walking, cycling and public transport trips per day by 2030. In terms of car travel, the target is to “Increas[e] the proportion of kilometres driven by passenger electric cars to between 40 and 45% by 2030, in addition to a reduction of 10% in kilometres driven by the remaining internal combustion engine cars.” This equates to a 5.5 to 6% reduction in total car km driven.</p>
<p>To model this decrease in car driver km, cycling uptake increases in line with the Go Dutch scenario. However, we only model shift from driving to cycling. There is no shift from other modes of transport to cycling.</p>
</section>
<section id="go-dutch" class="level3" data-number="2.4.4">
<h3 data-number="2.4.4" class="anchored" data-anchor-id="go-dutch"><span class="header-section-number">2.4.4</span> Go Dutch</h3>
<p>Under the Go Dutch scenario cycling reaches levels equivalent to those found in the Netherlands, taking account of the effects of route hilliness (measured as mean gradient) and route distance. This scenario uses the same model that was used PCT, allowing trips to shift from any other mode to cycling <span class="citation" data-cites="lovelace2017">(<a href="#ref-lovelace2017" role="doc-biblioref">Lovelace et al., 2017</a>)</span>.</p>
</section>
<section id="ebike" class="level3" data-number="2.4.5">
<h3 data-number="2.4.5" class="anchored" data-anchor-id="ebike"><span class="header-section-number">2.4.5</span> Ebike</h3>
<p>Also based on the PCT scenario with the same name, the Eike scenario in CRUSE takes Go Dutch cycling uptake, and adds onto this the impact of increased ebike usage, which allows for longer cycle trips. However, travel to primary and secondary schools still uses Go Dutch uptake, since no ebike scenario has been developed for school journeys, and children may be less likely to own ebikes than adults.</p>
</section>
</section>
<section id="sec-ui" class="level2" data-number="2.5">
<h2 data-number="2.5" class="anchored" data-anchor-id="sec-ui"><span class="header-section-number">2.5</span> User interface</h2>
<p>The CRUSE web application is statically hosted, meaning that it can be accessed without the need for a server running software such as the R package ‘shiny’ or Python packages such as ‘streamlit’ or ‘flask’ in the background <span class="citation" data-cites="wickham2021">(<a href="#ref-wickham2021" role="doc-biblioref">Wickham, 2021</a>)</span>. Typical intended user stories are illustrated in <a href="#fig-user-stories">Figure&nbsp;5</a>, which shows that the tool is designed to be used by both professional and non-professional users. For the main target audience, professional transport planners working at the county level, the tool provides a range of outputs, including estimates of cycling potential at the county and network level. The provision of balanced (the default), quietest and fastest route networks enables planners to consider the trade-offs between directness and ‘cycle friendliness’ when planning new infrastructure. The tool also provides data downloads, enabling estimates of cycling potential on the network to be visualised and analysed with other tools such as QGIS, Python or R.</p>
<p>For non-professional users, the tool provides a simple interface to explore the cycling potential of the network. By providing a single landing page that is suitable for both professional and non-professional users (such as an advocate or parent interested in safe routes to school), the tool aims to facilitate communication between these groups.</p>
<div class="cell" data-fig-width="100%">
<div class="cell-output-display">
<div id="fig-user-stories" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<div>
<pre class="mermaid mermaid-js" data-label="fig-user-stories">graph LR
    A(Professional user) --&gt; B[CRUSE landing page]
    B --&gt; C[CRUSE national map]
    C --&gt; D[CRUSE county map]
    D --&gt; F[Full county map]
    D --&gt; CS[County statistics]
    D --&gt; Q[Quiet and fast route networks]
    D --&gt; DD[Data downloads]
    DD --&gt; EX{External tools}
    X(Non-professional user) --&gt; Y[CRUSE landing page]
    Y --&gt; Z[CRUSE national map]
    Z --&gt; R[CRUSE county level results]
    Z --&gt; E(Exploration)
    R --&gt; E
    E --&gt; COMS{Communication}
</pre>
</div>
<figcaption class="figure-caption">Figure&nbsp;5: Hypothetical user stories for the CRUSE Tool illustrating that it can be used in different ways by different user groups.</figcaption>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="sec-results" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Results</h1>
<p>The main result of the CRUSE project is an open access web application and datasets on current and potential future cycling levels in Ireland, with evidence provided at county and route segment levels. Like the PCT on which CRUSE builds, a key feature of the results is that they are systematic and available for all counties, and most routes on which cycling is permitted, in Ireland. The full set of results are therefore too extensive to present in their entirety in this paper. Through the interactive web application, users can explore the data to generate the results that are most relevant to their needs, whether that is finding the cycling potential on a particular road or finding ‘weak links’ or barriers in the cycle network associated with a particular school, work place or other destination.</p>
<p>Instead of trying to show such use cases, of which there are many hundreds, we present a selection of results to illustrate the main features of the CRUSE Tool.</p>
<!-- ## National results {#sec-national-results}

The CRUSE Tool provides estimates of cycling potential at the national level, as shown in @fig-national-results.


National planning

Regional

Local -->
<!-- ## Local results -->
<p>To illustrate the results in urban areas, we took the top 4 cities in Ireland by population: Dublin City, Cork, Limerick and Galway (with city populations of 0.6, 0.2, 0.1 and 0.1 million respectively). The results for central areas demarcated with circular areas with a radius of 3km for these cities are presented in <a href="#fig-city-results">Figure&nbsp;6</a>.</p>
<div id="fig-city-results" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="images/rnet_types.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Figure&nbsp;6: Fastest, balanced and quietest cycle networks within 3km circular areas containing the four largest cities in Ireland. The networks are coloured by cycle friendliness and with widths varying in proportion to the potential level of cycling under the ‘Go Dutch’ scenario.</figcaption>
</figure>
</div>
<p>Aside from the widely varying sizes and route networks of each city, with Dublin having by far the densest network, it is clear from the visualisation of cycling friendliness that there is a lot of room for improvement in all cities. Dublin has had received most investment in cycling infrastructure and this is apparent from the high proportion of the route network that is green, even in the ‘Fastest’ route network representing routes that prioritise speed and directness over comfort and safety. Dublin also has the highest mode share of cycling of the four cities, adding to the evidence base showing that investment in cycling infrastructure is effective in increasing cycling uptake.</p>
<p>Although Dublin City has made progress, there are still many parts of the Fastest route network, and even some parts of the Balanced and Quietest route networks, that are not cycle friendly and which have high cycling potential. According to a recent report, 71% of residents in the Dublin Metropolitan Area support “more cycle tracks along roads, physically separated from traffic and pedestrians”.<a href="#fn14" class="footnote-ref" id="fnref14" role="doc-noteref"><sup>14</sup></a> The results for the Dublin area could help prioritise investment in cycling infrastructure in the city.</p>
<!-- The results for the other -->
</section>
<section id="sec-discussion" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> Discussion</h1>
<p>The CRUSE Tool provides evidence on current and potential future cycling levels across Ireland down to the street level, with potential assigned to ‘fastest’, ‘balanced’ and ‘quietest’ route networks. This provision of multiple scenarios of behaviour changes <em>and</em> multiple scenarios of investment, for example in cycling infrastructure next to major roads vs quiet residential streets, is a key feature of the CRUSE Tool.</p>
<p>As highlighted in a paper on cycling infrastructure preferences based on a case study of Dublin, both directness and quietness are important <span class="citation" data-cites="caulfield2012">(<a href="#ref-caulfield2012" role="doc-biblioref">Caulfield et al., 2012</a>)</span>:</p>
<blockquote class="blockquote">
<p>Direct routes with short journey times were found to be the most important positive variable for existing cyclists and non-cyclists in determining route choice. This is followed by infrastructure type, the number of junctions along the route, traffic speed and cyclist volumes. In terms if infrastructure, regardless of the level of cycling confidence, routes which have ‘no facilities’ or ‘bus/cycle lanes’ are the least favoured cycle route types.</p>
</blockquote>
<p>The CRUSE Tool can help both in terms of describing the current situation, and also prioritise investment in those direct routes with high cycling potential that lack adequate cycling infrastructure, highlighted by <span class="citation" data-cites="caulfield2012">Caulfield et al. (<a href="#ref-caulfield2012" role="doc-biblioref">2012</a>)</span>. It will also support reporting for the RISM Directive on road casualties as part of the road safety management system.</p>
<p>While the CRUSE Tool is not the first national and publicly available tool for cycling planning, it has some key features that make it relevant for other countries, and other national road authorities tasked with making their transport systems safe:</p>
<ul>
<li>The results are <em>open access</em> meaning that any stakeholder in the planning system can access the evidence. This will help to democratise the transport planning process and make wider conversations about transport planning more evidence-based and less polarised <span class="citation" data-cites="lovelace2020">(<a href="#ref-lovelace2020" role="doc-biblioref">Lovelace et al., 2020</a>)</span>, something that is particularly relevant given the potentially polarising nature of pro-cycling interventions <span class="citation" data-cites="wild2017">(<a href="#ref-wild2017" role="doc-biblioref">Wild et al., 2017</a>)</span>.</li>
<li>The results are fully reproducible (code to be released pending sign-off by TII’s IT team), preventing ‘cloud lock in’ to a potentially monopolistic consultancy, and encouraging input from the wider open source community <span class="citation" data-cites="lovelace2021 dhir2017">(<a href="#ref-dhir2017" role="doc-biblioref">Dhir &amp; Dhir, 2017</a>; <a href="#ref-lovelace2021" role="doc-biblioref">Lovelace, 2021</a>)</span>.</li>
<li>By covering a wide range of trip purposes — not just travel to work <span class="citation" data-cites="lovelace2017 heinen2010">(<a href="#ref-heinen2010" role="doc-biblioref">Heinen et al., 2010</a>; <a href="#ref-lovelace2017" role="doc-biblioref">Lovelace et al., 2017</a>)</span> and travel school <span class="citation" data-cites="goodman2019">(<a href="#ref-goodman2019" role="doc-biblioref">Goodman et al., 2019</a>)</span> as covered in previously published research on open access national cycle netework planning tools — the results capture a higher proportion of cycling potential including key rural trips which are often under-represented in models of active travel.</li>
</ul>
</section>
<section id="sec-conclusions" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> Conclusions</h1>
<p>The CRUSE Tool is an open access web application for strategic cycle network planning and prioritisation of road safety interventions across Ireland. Building on previous work, it provides a nationally consistent evidence base, providing valuable insights to planners and other stakeholders in the transport planning process, at national and local levels. Because the results are available at the route segment level, the tool can be used to identify ‘weak links’ in the cycle network, and to prioritise investment in cycling infrastructure. Furthermore, the provision of the evidence in a free and publicly available website, hosted at <a href="https://cruse.bike">cruse.bike</a>, means that it can be used by anyone, encouraging wider participation and more evidence-based debate about transport planning.</p>
<p>A key feature of the project methodologically is its calculation of current and future potential not only for travel to work and travel to school, but also for other trip purposes, including recreational trips. This required the development of spatial interaction models and estimation of the relative attractiveness of different destinations for different trip purposes, an area of active research where new developments could be incorporated into the tool in future <span class="citation" data-cites="hasova2022">(<a href="#ref-hasova2022" role="doc-biblioref">Hasova et al., 2022</a>)</span>.</p>
<p>The CRUSE Tool and the underlying research and methods are not without limitations, suggesting future areas of research, data collection needs, and policy application. The route network level results have not been validated to the extent we had planned at the outset of the project. We compared route network level results with ‘ground truth’ data from cycle counter datasets across Dublin to test different network types and to ensure that additional trip types added to work and educational trips increased the quality of fit under the baseline scenario. However, the size of the counter network was insufficient to provide an opportunity for robust evaluation of model performance, suggesting a combined program of new count data collection and analysis should be a priority for future work, with findings feeding directly into work to improve the outputs of the the CRUSE Tool.</p>
<p>More broadly, the tool’s outputs are limited to just one more of active travel (cycling), ignoring walking and wheeling, including wheelchair use and a range of wheeled devices such as scooters, bike trailers and e-cargo bikes that can be used to escort children to school. Sustainable transport policies should plan for walking, wheeling and cycling, and there are many co-benefits of broadly defined active travel interventions that benefit all active modes, such as measures to reduce heavy motor traffic speeds and volumes in areas and along corridors with high active travel potential. This raises the question of whether other active modes should be incorporated into the results using the OD-based approach outlined in this paper, or whether different modelling approaches are needed to properly capture the shorter distance trips typically made by walking <span class="citation" data-cites="cooper2018">(<a href="#ref-cooper2018" role="doc-biblioref">Cooper, 2018</a>)</span>. Furthermore, the estimates of cycling presented in the CRUSE Tool omit multi-modal trips including public transport, and omit trip chaining, due to the need to capture a large portion of cycling potential within the resource constraints of the project.</p>
<p>The CRUSE Tool is already used in practice to support more ambitious and data-driven planning for safe cycling routes in multiple counties across Ireland. We hope that the underlying approach, and the publicly available evidence provided in the CRUSE Tool itself, provide a basis for future reproducible research, open source software development into strategic cycle network planning tools in Ireland and other countries. Active travel represents a win-win-win for physical activity, environment, and local economic opportunities. In combination with broader sustainable mobility measures and policies to reduce motor traffic speeds and volumes, tools such as CRUSE can support the fast and fair decarbonisation of transport systems worldwide.</p>
</section>
<section id="list-of-abbreviations" class="level1" data-number="6">
<h1 data-number="6"><span class="header-section-number">6</span> List of abbreviations</h1>
<p>CSO: Central Statistics Office</p>
<p>CRUSE: Cycle Route Uptake and Scenario Estimation</p>
<p>ED: Electoral Division</p>
<p>GTFS: General Transit Feed Specification</p>
<p>KSI: Killed and Seriously Injured</p>
<p>NRA: National Road Authority</p>
<p>NRN: National Road Network</p>
<p>OD: Origin-Destination, typically referring to origin-destination data which contains information on the number of people travelling between each pair of zones</p>
<p>OSM: Open Street Map</p>
<p>PCT: Propensity to Cycle Tool</p>
<p>POWSCAR: Place of Work, School or College Census of Anonymised Records</p>
<p>TII: Transport Infrastructure Ireland</p>
</section>
<section id="declarations" class="level1" data-number="7">
<h1 data-number="7"><span class="header-section-number">7</span> Declarations</h1>
<section id="availability-of-data-and-material" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="availability-of-data-and-material">Availability of data and material</h2>
<p>Data was obtained from the Central Statistics Office (CSO) and Transport Infrastructure Ireland (TII) under license and cannot be shared publicly. The code used to generate the results presented in this paper is available at https://github.com/cruse-bike.</p>
</section>
<section id="funding" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="funding">Funding</h2>
<p>The work was funded by Transport Infrastructure Ireland (TII).</p>
</section>
<section id="acknowledgements" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="acknowledgements">Acknowledgements</h2>
<p>Thanks to Paul MacDonald and Donal Hodgins (Kildare County Council), for testing early versions of the tool and for their input into the project. Thanks to Ciaran Maguire, Catherine Swift, and others at AECOM for their input into the project.</p>
</section>
<section id="competing-interests" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="competing-interests">Competing interests</h2>
<p>The authors declare that they have no competing interests.</p>
</section>
<section id="authors-contributions" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="authors-contributions">Authors’ contributions</h2>
<p>RL led the development of the CRUSE Tool, with input from JT, EV, HM, EB, PW, GOT, DB, and SM. SM instigated the project and coordinated its policy impact. PW, EB and GOT provided project management and transport engineering expertise.</p>



</section>
</section>


<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" data-line-spacing="2" role="list">
<div id="ref-anable2019" class="csl-entry" role="listitem">
Anable, J., &amp; Goodwin, P. (2019). <em>Transport and mobility</em>. CREDS. <a href="https://www.creds.ac.uk/publications/shifting-the-focus-4-transport-mobility/">https://www.creds.ac.uk/publications/shifting-the-focus-4-transport-mobility/</a>
</div>
<div id="ref-brand2020" class="csl-entry" role="listitem">
Brand, C., Dons, E., Anaya-Boig, E., Avila-Palencia, I., Clark, A., Nazelle, A. de, Gascon, M., Gaupp-Berghausen, M., Gerike, R., &amp; Gotschi, T. (2020). The climate change mitigation effects of active travel. <em>Preprint: Researchsquare.com</em>.
</div>
<div id="ref-burns2013" class="csl-entry" role="listitem">
Burns, L. D. (2013). Sustainable mobility: A vision of our transport future. <em>Nature</em>, <em>497</em>(7448), 181182. <a href="http://dx.doi.org/10.1038/497181a 10.1038/497181a">http://dx.doi.org/10.1038/497181a 10.1038/497181a</a>
</div>
<div id="ref-caulfield2012" class="csl-entry" role="listitem">
Caulfield, B., Brick, E., &amp; McCarthy, O. T. (2012). Determining bicycle infrastructure preferences <span></span> A case study of Dublin. <em>Transportation Research Part D: Transport and Environment</em>, <em>17</em>(5), 413–417. <a href="https://doi.org/10.1016/j.trd.2012.04.001">https://doi.org/10.1016/j.trd.2012.04.001</a>
</div>
<div id="ref-cooper2018" class="csl-entry" role="listitem">
Cooper, C. H. V. (2018). Predictive spatial network analysis for high-resolution transport modeling, applied to cyclist flows, mode choice, and targeting investment. <em>International Journal of Sustainable Transportation</em>, <em>0</em>(0), 1–11. <a href="https://doi.org/10.1080/15568318.2018.1432730">https://doi.org/10.1080/15568318.2018.1432730</a>
</div>
<div id="ref-cycling2017" class="csl-entry" role="listitem">
<em>Cycling and walking investment strategy</em>. (2017). <a href="https://www.gov.uk/government/publications/cycling-and-walking-investment-strategy">https://www.gov.uk/government/publications/cycling-and-walking-investment-strategy</a>
</div>
<div id="ref-dhir2017" class="csl-entry" role="listitem">
Dhir, S., &amp; Dhir, S. (2017). Adoption of open-source software versus proprietary software: An exploratory study. <em>Strategic Change</em>, <em>26</em>(4), 363–371. <a href="https://doi.org/10.1002/jsc.2137">https://doi.org/10.1002/jsc.2137</a>
</div>
<div id="ref-felix2023" class="csl-entry" role="listitem">
Félix, R., Lovelace, R., &amp; Moura, F. (2022). <em><span class="nocase">biclaR - Ferramenta de apoio ao planeamento da rede ciclável na área metropolitana de Lisboa</span></em>. <span>CERIS - Instituto Superior Técnico and Transportes Metropolitanos de Lisboa</span>. <a href="https://biclar.tmlmobilidade.pt">https://biclar.tmlmobilidade.pt</a>
</div>
<div id="ref-goodman2019" class="csl-entry" role="listitem">
Goodman, A., Rojas, I. F., Woodcock, J., Aldred, R., Berkoff, N., Morgan, M., Abbas, A., &amp; Lovelace, R. (2019). Scenarios of cycling to school in england, and associated health and carbon impacts: Application of the <span>‘</span>propensity to cycle tool<span>’</span>. <em>Journal of Transport and Health</em>, <em>12</em>, 263–278. <a href="https://doi.org/10.1016/j.jth.2019.01.008">https://doi.org/10.1016/j.jth.2019.01.008</a>
</div>
<div id="ref-gray2001" class="csl-entry" role="listitem">
Gray, D., Farrington, J., Shaw, J., Martin, S., &amp; Roberts, D. (2001). Car dependence in rural scotland: Transport policy, devolution and the impact of the fuel duty escalator. <em>Journal of Rural Studies</em>, <em>17</em>(1), 113125. <a href="https://doi.org/10.1016/S0743-0167(00)00035-8">https://doi.org/10.1016/S0743-0167(00)00035-8</a>
</div>
<div id="ref-hasova2022" class="csl-entry" role="listitem">
Hasova, L., Tranos, E., &amp; Wolf, L. J. (2022). <em>Form and function in spatial interaction: A new approach to spatial structure</em>. <a href="https://lenkahas.com/files/preprint.pdf">https://lenkahas.com/files/preprint.pdf</a>
</div>
<div id="ref-heinen2010" class="csl-entry" role="listitem">
Heinen, E., Wee, B. van, &amp; Maat, K. (2010). Commuting by bicycle: An overview of the literature. <em>Transport Reviews</em>, <em>30</em>(1), 5996. <a href="https://doi.org/10.1080/01441640903187001">https://doi.org/10.1080/01441640903187001</a>
</div>
<div id="ref-jaramillo2022" class="csl-entry" role="listitem">
Jaramillo, P., Kahn Ribeiro, S., Newman, P., Dhar, S., Diemuodeke, O. E., Kajino, T., Lee, D. S., Nugroho, S. B., Ou, X., Hammer Strømman, A., &amp; Whitehead, J. (2022). <em>Transport</em> (P. R. Shukla, J. Skea, R. Slade, A. A. Khourdajie, R. van Diemen, D. McCollum, M. Pathak, S. Some, P. Vyas, R. Fradera, M. Belkacemi, A. Hasija, G. Lisboa, S. Luz, &amp; J. Malley, Eds.). Cambridge University Press. <a href="https://www.ipcc.ch/report/ar6/wg3/downloads/report/IPCC_AR6_WGIII_Chapter10.pdf">https://www.ipcc.ch/report/ar6/wg3/downloads/report/IPCC_AR6_WGIII_Chapter10.pdf</a>
</div>
<div id="ref-lovelace2016" class="csl-entry" role="listitem">
Lovelace, R. (2016). Mapping out the future of cycling. <em>Get Britain Cycling</em>, <em>5</em>, 2224. <a href="http://eprints.whiterose.ac.uk/100080/">http://eprints.whiterose.ac.uk/100080/</a>
</div>
<div id="ref-lovelace2021" class="csl-entry" role="listitem">
Lovelace, R. (2021). Open source tools for geographic analysis in transport planning. <em>Journal of Geographical Systems</em>. <a href="https://doi.org/10.1007/s10109-020-00342-2">https://doi.org/10.1007/s10109-020-00342-2</a>
</div>
<div id="ref-lovelace2022" class="csl-entry" role="listitem">
Lovelace, R., Félix, R., &amp; Carlino, D. (2022). Jittering: A Computationally Efficient Method for Generating Realistic Route Networks from Origin-Destination Data. <em>Findings</em>, 33873. <a href="https://doi.org/10.32866/001c.33873">https://doi.org/10.32866/001c.33873</a>
</div>
<div id="ref-lovelace2017" class="csl-entry" role="listitem">
Lovelace, R., Goodman, A., Aldred, R., Berkoff, N., Abbas, A., &amp; Woodcock, J. (2017). The Propensity to Cycle Tool: An open source online system for sustainable transport planning. <em>Journal of Transport and Land Use</em>, <em>10</em>(1). <a href="https://doi.org/10.5198/jtlu.2016.862">https://doi.org/10.5198/jtlu.2016.862</a>
</div>
<div id="ref-lovelace2020" class="csl-entry" role="listitem">
Lovelace, R., Parkin, J., &amp; Cohen, T. (2020). Open access transport models: A leverage point in sustainable transport planning. <em>Transport Policy</em>, <em>97</em>, 47–54. <a href="https://doi.org/10.1016/j.tranpol.2020.06.015">https://doi.org/10.1016/j.tranpol.2020.06.015</a>
</div>
<div id="ref-motte-baumvol2010" class="csl-entry" role="listitem">
Motte-baumvol, B., Massot, M.-H. M. M.-H., &amp; Byrd, A. M. A. A. M. (2010). Escaping car dependence in the outer suburbs of paris. <em>Urban Studies</em>, <em>47</em>(3), 604619. <a href="https://doi.org/10.1177/0042098009349773">https://doi.org/10.1177/0042098009349773</a>
</div>
<div id="ref-nello-deakin2020" class="csl-entry" role="listitem">
Nello-Deakin, S. (2020). Environmental determinants of cycling: Not seeing the forest for the trees? <em>Journal of Transport Geography</em>, <em>85</em>, 102704. <a href="https://doi.org/10.1016/j.jtrangeo.2020.102704">https://doi.org/10.1016/j.jtrangeo.2020.102704</a>
</div>
<div id="ref-parkin2018" class="csl-entry" role="listitem">
Parkin, J. (2018). <em>Designing for cycle traffic: International principles and practice</em>. ICE Publishing. <a href="https://www.icevirtuallibrary.com/isbn/9780727763495">https://www.icevirtuallibrary.com/isbn/9780727763495</a>
</div>
<div id="ref-shergold2012" class="csl-entry" role="listitem">
Shergold, I., Parkhurst, G., &amp; Musselwhite, C. (2012). Rural car dependence: An emerging barrier to community activity for older people. <em>Transportation Planning and Technology</em>, <em>35</em>(1), 6985.
</div>
<div id="ref-wickham2021" class="csl-entry" role="listitem">
Wickham, H. (2021). <em>Mastering shiny: Build interactive apps, reports, and dashboards powered by r</em>. O’Reilly Media.
</div>
<div id="ref-wild2017" class="csl-entry" role="listitem">
Wild, K., Woodward, A., Field, A., &amp; Macmillan, A. (2017). Beyond <span>‘</span>bikelash<span>’</span>: Engaging with community opposition to cycle lanes. <em>Mobilities</em>, 1–15. <a href="https://doi.org/10.1080/17450101.2017.1408950">https://doi.org/10.1080/17450101.2017.1408950</a>
</div>
<div id="ref-woodcock2018" class="csl-entry" role="listitem">
Woodcock, J., Abbas, A., Ullrich, A., Tainio, M., Lovelace, R., Sá, T. H., Westgate, K., &amp; Goodman, A. (2018). Development of the Impacts of Cycling Tool (ICT): A modelling study and web tool for evaluating health and environmental impacts of cycling uptake. <em>PLOS Medicine</em>, <em>15</em>(7), e1002622. <a href="https://doi.org/10.1371/journal.pmed.1002622">https://doi.org/10.1371/journal.pmed.1002622</a>
</div>
<div id="ref-woodcock2021" class="csl-entry" role="listitem">
Woodcock, J., Aldred, R., Lovelace, R., Strain, T., &amp; Goodman, A. (2021). Health, environmental and distributional impacts of cycling uptake: The model underlying the Propensity to Cycle tool for England and Wales. <em>Journal of Transport and Health</em>, <em>22</em>, 101066. <a href="https://doi.org/10.1016/j.jth.2021.101066">https://doi.org/10.1016/j.jth.2021.101066</a>
</div>
</div></section><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>https://eur-lex.europa.eu/legal-content/EN/TXT/?u ri=celex%3A32008L0096<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>https://eur-lex.europa.eu/legal-content/EN/TXT/?u ri=celex%3A32008L0096<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p><a href="https://www.gov.ie/en/publication/774e2-national-development-plan-2021-2030/" class="uri">https://www.gov.ie/en/publication/774e2-national-development-plan-2021-2030/</a><a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4"><p><a href="https://www.gov.ie/en/publication/7bd8c-climate-action-plan-2023/" class="uri">https://www.gov.ie/en/publication/7bd8c-climate-action-plan-2023/</a><a href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn5"><p><a href="https://www.gov.ie/en/publication/774e2-national-development-plan-2021-2030/" class="uri">https://www.gov.ie/en/publication/774e2-national-development-plan-2021-2030/</a><a href="#fnref5" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn6"><p>https://www.tii.ie/tii-library/strategic-planning/national-roads-2040/TII-NR2040-Final-Report-EN-April-2023.pdf<a href="#fnref6" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn7"><p>https://assets.gov.ie/42950/f789b2fcfb144441822f58236986eeea.pdf<a href="#fnref7" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn8"><p><a href="https://www.nationaltransport.ie/planning-and-investment/strategic-planning/greater-dublin-area-transport-strategy/" class="uri">https://www.nationaltransport.ie/planning-and-investment/strategic-planning/greater-dublin-area-transport-strategy/</a><a href="#fnref8" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn9"><p>https://www.nationaltransport.ie/wp-content/uploads/2019/01/National_Household_Travel_Survey_2017_Report_-_December_2018.pdf<a href="#fnref9" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn10"><p>https://www.nationaltransport.ie/planning-and-investment/strategic-planning/greater-dublin-area-transport-strategy/<a href="#fnref10" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn11"><p>See REF Impact Case Study “Cycle network policy, planning and investment transformed by the Propensity to Cycle Tool” at <a href="https://results2021.ref.ac.uk/impact/847d1191-7f25-46ba-a399-b481125edc8f">results2021.ref.ac.uk</a> submitted by the University of Leeds.<a href="#fnref11" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn12"><p>See the REF Impact Case Study “Creating Step Changes in Cycling Policy and Infrastructure Planning across the UK” at <a href="https://results2021.ref.ac.uk/impact/4BBF3436-FD10-4C75-9791-F5E98AB4411B">results2021.ref.ac.uk</a> submitted by the University of Westminster.<a href="#fnref12" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn13"><p>See the Health economic assessment tool for walking and cycling at <a href="https://www.heatwalkingcycling.org/#homepage">www.heatwalkingcycling.org</a>.<a href="#fnref13" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn14"><p>https://www.nationaltransport.ie/wp-content/uploads/2022/05/220504-WACI22_DublinMetropolitanArea_v35_DIGITAL_v2.pdf<a href="#fnref14" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>